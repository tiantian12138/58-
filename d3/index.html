<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        /* #cotainer{
            background-color: #ddd;
            width: 500px;
            height: 250px;
        }
        path{
            fill:none;
            stroke:#ff0;
            stroke-width: 3;
        }
        .domain,.tick line{
            stroke: gray;
            stroke-width: 2;
        } */
    </style>
</head>
<body>
    <div id="cotainer">

    </div>
<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
<script>
//水平柱状图标
var data =[1,4,7,8,2,6,5,9]
bar_height = 50,
bar_padding = 10,
svg_height = (bar_height+bar_padding)*data.length,
svg_width = 500;

var scale = d3.scale.linear()
.domain([0,d3.max(data)])
.range([0,svg_width])

var svg = d3.select("#cotainer")
.append("svg")
.attr("width",svg_width)
.attr("height",svg_height)


var bar = svg.selectAll("g")
.data(data)
.enter()
.append("g")
.attr("transform",function(d,i){
return "translate(0,"+i*(bar_height+bar_padding)+")"
})

bar.append("rect")
.attr({
    "width":function(d){
        return scale(d)
    },
    "height":bar_height
})
.style("fill","blue")

bar.append("text")
.text(function(d){
    return d
})

.attr({
    "x":function(d){
        return scale(d)
    },
    "y":bar_height/2,
    "text-anchor":""
})

// var width=500,
// height=250,
// margin={
//     left:50,
//     top:30,
//     right:20,
//     bottom:20
// }
// var svg = d3.select("#cotainer")
// .append("svg:svg")
// .attr("width",width)
// .attr("height",height)

// g_width = width-margin.left-margin.right
// g_height = height-margin.top-margin.bottom

// var g = d3.select("svg")
// .append("g")
// .attr("transform","translate("+margin.left+","+margin.top+")")

// var data = [1,3,5,7,8,4,3,7]


// var scale_x = d3.scale.linear()
// .domain([0,data.length-1])
// .range([0,g_width])

// var scale_y = d3.scale.linear()
// .domain([0,d3.max(data)])
// .range([g_height,0])

// var line_generator = d3.svg.line()
// .x(function(d,i){
//     return scale_x(i)
// })
// .y(function(d){
//  return scale_y(d)
// })
// .interpolate("cardinal")
// g.append("path")
// .attr("d",line_generator(data))

// var x_axis = d3.svg.axis().scale(scale_x),
// y_axis = d3.svg.axis().scale(scale_y)
// g.append("g")
// .call(x_axis)
// .append("text")
// .text("Prise($)")
// .attr("transform","roate(-90)")
// .attr("text-anchor","end")
// .attr("dy","lem")

</script>
</body>
</html>